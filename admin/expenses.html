<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="utf-8" />
    <meta content="width=device-width, initial-scale=1.0" name="viewport" />
    <title>Expenses - PG Management</title>
    <script src="https://cdn.tailwindcss.com?plugins=forms,container-queries"></script>
    <link href="https://fonts.googleapis.com" rel="preconnect" />
    <link crossorigin="" href="https://fonts.gstatic.com" rel="preconnect" />
    <link href="https://fonts.googleapis.com/css2?family=Manrope:wght@400;500;700;800&amp;display=swap"
        rel="stylesheet" />
    <link href="https://fonts.googleapis.com/css2?family=Dancing+Script:wght@400;700&amp;display=swap"
        rel="stylesheet" />
    <script>
        tailwind.config = {
            darkMode: "class",
            theme: {
                extend: {
                    colors: {
                        "primary": "#1193d4",
                        "background-light": "#f6f7f8",
                        "background-dark": "#000000",
                    },
                    fontFamily: {
                        "display": ["Manrope"],
                        "cursive": ["Dancing Script"]
                    },
                    borderRadius: {
                        "DEFAULT": "0.25rem",
                        "lg": "0.5rem",
                        "xl": "0.75rem",
                        "full": "9999px"
                    },
                },
            },
        }
    </script>
    <style>
        body {
            min-height: max(884px, 100dvh);
        }
    </style>
</head>

<body class="bg-background-light dark:bg-background-dark font-display text-slate-800 dark:text-slate-200">
    <div class="relative flex min-h-screen w-full flex-col justify-between">
        <div class="flex-grow pb-20">
            <header
                class="sticky top-0 z-10 flex items-center justify-between border-b border-slate-200 dark:border-slate-800 bg-background-light/80 dark:bg-background-dark/80 p-4 backdrop-blur-sm">
                <a href="./properties.html" class="flex h-12 w-12 cursor-pointer items-center justify-center rounded-full text-slate-600 dark:text-slate-300 hover:bg-primary/10 dark:hover:bg-primary/20 focus:outline-none">
                    <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 256 256" fill="currentColor"><path d="M224,128a8,8,0,0,1-8,8H59.31l58.35,58.34a8,8,0,0,1-11.32,11.32l-72-72a8,8,0,0,1,0-11.32l72-72a8,8,0,0,1,11.32,11.32L59.31,120H216A8,8,0,0,1,224,128Z"></path></svg>
                </a>
                <h1 id="pageTitle" class="text-xl font-bold text-slate-900 dark:text-white text-center flex-1">Expenses</h1>
                <div class="w-12"></div>
            </header>
            <main class="p-4 space-y-6">
                <!-- Add Expense Form -->
                <section class="bg-white dark:bg-slate-900 p-4 rounded-lg shadow-sm">
                    <h2 class="text-lg font-bold text-slate-900 dark:text-white mb-4">Add New Expense</h2>
                    <form id="expenseForm" class="space-y-4">
                        <div class="grid grid-cols-2 gap-4">
                            <div>
                                <label for="expenseType" class="block text-sm font-medium text-slate-700 dark:text-slate-300 mb-1">Type</label>
                                <select id="expenseType" name="expenseType" required class="form-select w-full rounded-lg border-0 bg-slate-100 dark:bg-slate-800/50 text-slate-900 dark:text-slate-100 focus:ring-2 focus:ring-primary h-12 px-4">
                                    <option>Electricity</option>
                                    <option>Water</option>
                                    <option>Maintenance</option>
                                    <option>Salary</option>
                                    <option>Groceries</option>
                                    <option>Other</option>
                                </select>
                            </div>
                            <div>
                                <label for="expenseAmount" class="block text-sm font-medium text-slate-700 dark:text-slate-300 mb-1">Amount</label>
                                <input type="number" id="expenseAmount" name="expenseAmount" required placeholder="e.g. 5000" class="form-input w-full rounded-lg border-0 bg-slate-100 dark:bg-slate-800/50 text-slate-900 dark:text-slate-100 focus:ring-2 focus:ring-primary h-12 px-4">
                            </div>
                        </div>
                        <div>
                            <label for="expenseDate" class="block text-sm font-medium text-slate-700 dark:text-slate-300 mb-1">Date</label>
                            <input type="date" id="expenseDate" name="expenseDate" required class="form-input w-full rounded-lg border-0 bg-slate-100 dark:bg-slate-800/50 text-slate-900 dark:text-slate-100 focus:ring-2 focus:ring-primary h-12 px-4">
                        </div>
                        <div>
                            <label for="expenseDescription" class="block text-sm font-medium text-slate-700 dark:text-slate-300 mb-1">Description (Optional)</label>
                            <textarea id="expenseDescription" name="expenseDescription" rows="2" class="form-textarea w-full rounded-lg border-0 bg-slate-100 dark:bg-slate-800/50 text-slate-900 dark:text-slate-100 focus:ring-2 focus:ring-primary px-4 py-3"></textarea>
                        </div>
                        <div class="flex justify-end">
                            <button type="submit" class="bg-primary text-white font-bold py-3 px-6 rounded-lg shadow-lg shadow-primary/30 hover:bg-opacity-90 transition duration-300">
                                Add Expense
                            </button>
                        </div>
                    </form>
                </section>

                <!-- Expense List -->
                <section>
                    <h2 class="text-lg font-bold text-slate-900 dark:text-white mb-2">Recent Expenses</h2>
                    <div id="expense-list" class="space-y-2">
                        <!-- Example Item -->
                        <div class="bg-white dark:bg-slate-900 p-3 rounded-lg flex items-center gap-4">
                            <div class="flex-grow">
                                <p class="font-semibold text-slate-800 dark:text-slate-100">Electricity Bill</p>
                                <p class="text-sm text-slate-500 dark:text-slate-400">2024-07-15</p>
                            </div>
                            <p class="font-bold text-lg text-red-500">- ₹8,200</p>
                        </div>
                        <!-- Items will be added here by JS -->
                    </div>
                </section>
            </main>
        </div>
        <nav
            class="sticky bottom-0 z-10 border-t border-slate-200 dark:border-slate-800 bg-background-light/80 dark:bg-background-dark/80 backdrop-blur-sm">
            <div class="flex justify-around p-2">
                <a class="flex flex-1 flex-col items-center justify-center gap-1 rounded-full p-2 text-slate-500 dark:text-slate-400 hover:text-primary"
                    href="./dashshboad.html">
                    <div class="p-2">
                        <svg fill="currentColor" height="24" viewBox="0 0 256 256" width="24" xmlns="http://www.w3.org/2000/svg"><path d="M224,115.55V208a16,16,0,0,1-16,16H168a16,16,0,0,1-16-16V168a8,8,0,0,0-8-8H112a8,8,0,0,0-8,8v40a16,16,0,0,1-16,16H48a16,16,0,0,1-16-16V115.55a16,16,0,0,1,5.17-11.78l80-75.48.11-.11a16,16,0,0,1,21.53,0,1.14,1.14,0,0,0,.11.11l80,75.48A16,16,0,0,1,224,115.55Z"></path></svg>
                    </div>
                    <p class="text-xs font-medium">Home</p>
                </a>
                <a class="flex flex-1 flex-col items-center justify-center gap-1 rounded-full p-2 text-primary"
                    href="./properties.html">
                    <div class="bg-primary/10 dark:bg-primary/20 rounded-full p-2">
                        <svg fill="currentColor" height="24" viewBox="0 0 256 256" width="24" xmlns="http://www.w3.org/2000/svg"><path d="M240,208H224V96a16,16,0,0,0-16-16H144V32a16,16,0,0,0-24.88-13.32L39.12,72A16,16,0,0,0,32,85.34V208H16a8,8,0,0,0,0,16H240a8,8,0,0,0,0-16ZM208,96V208H144V96ZM48,85.34,128,32V208H48ZM112,112v16a8,8,0,0,1-16,0V112a8,8,0,1,1,16,0Zm-32,0v16a8,8,0,0,1-16,0V112a8,8,0,1,1,16,0Zm0,56v16a8,8,0,0,1-16,0V168a8,8,0,0,1,16,0Zm32,0v16a8,8,0,0,1-16,0V168a8,8,0,0,1,16,0Z"></path></svg>
                    </div>
                    <p class="text-xs font-bold">Properties</p>
                </a>
                <a class="flex flex-1 flex-col items-center justify-center gap-1 rounded-full p-2 text-slate-500 dark:text-slate-400 hover:text-primary"
                    href="./residents.html">
                    <div class="p-2">
                        <svg fill="currentColor" height="24" viewBox="0 0 256 256" width="24" xmlns="http://www.w3.org/2000/svg"><path d="M117.25,157.92a60,60,0,1,0-66.5,0A95.83,95.83,0,0,0,3.53,195.63a8,8,0,1,0,13.4,8.74,80,80,0,0,1,134.14,0,8,8,0,0,0,13.4-8.74A95.83,95.83,0,0,0,117.25,157.92ZM40,108a44,44,0,1,1,44,44A44.05,44.05,0,0,1,40,108Zm210.14,98.7a8,8,0,0,1-11.07-2.33A79.83,79.83,0,0,0,172,168a8,8,0,0,1,0-16,44,44,0,1,0-16.34-84.87,8,8,0,1,1-5.94-14.85,60,60,0,0,1,55.53,105.64,95.83,95.83,0,0,1,47.22,37.71A8,8,0,0,1,250.14,206.7Z"></path></svg>
                    </div>
                    <p class="text-xs font-medium">Residents</p>
                </a>
                <a class="flex flex-1 flex-col items-center justify-center gap-1 rounded-full p-2 text-slate-500 dark:text-slate-400 hover:text-primary"
                    href="./complaints.html">
                    <div class="p-2">
                        <svg fill="currentColor" height="24" viewBox="0 0 256 256" width="24" xmlns="http://www.w3.org/2000/svg"><path d="M240,120a48.05,48.05,0,0,0-48-48H152.2c-2.91-.17-53.62-3.74-101.91-44.24A16,16,0,0,0,24,40V200a16,16,0,0,0,26.29,12.25c37.77-31.68,77-40.76,93.71-43.3v31.72A16,16,0,0,0,151.12,214l11,7.33A16,16,0,0,0,186.5,212l11.77-44.36A48.07,48.07,0,0,0,240,120ZM40,199.93V40h0c42.81,35.91,86.63,45,104,47.24v65.48C126.65,155,82.84,164.07,40,199.93Zm131,8,0,.11-11-7.33V168h21.6ZM192,152H160V88h32a32,32,0,1,1,0,64Z"></path></svg>
                    </div>
                    <p class="text-xs font-medium">Complaints</p>
                </a>
                <a class="flex flex-1 flex-col items-center justify-center gap-1 rounded-full p-2 text-slate-500 dark:text-slate-400 hover:text-primary"
                    href="./settings.html">
                    <div class="p-2">
                        <svg fill="currentColor" height="24" viewBox="0 0 256 256" width="24" xmlns="http://www.w3.org/2000/svg"><path d="M128,80a48,48,0,1,0,48,48A48.05,48.05,0,0,0,128,80Zm0,80a32,32,0,1,1,32-32A32,32,0,0,1,128,160Zm88-29.84q.06-2.16,0-4.32l14.92-18.64a8,8,0,0,0,1.48-7.06,107.21,107.21,0,0,0-10.88-26.25,8,8,0,0,0-6-3.93l-23.72-2.64q-1.48-1.56-3-3L186,40.54a8,8,0,0,0-3.94-6,107.71,107.71,0,0,0-26.25-10.87,8,8,0,0,0-7.06,1.49L130.16,40Q128,40,125.84,40L107.2,25.11a8,8,0,0,0-7.06-1.48A107.6,107.6,0,0,0,73.89,34.51a8,8,0,0,0-3.93,6L67.32,64.27q-1.56,1.49-3,3L40.54,70a8,8,0,0,0-6,3.94,107.71,107.71,0,0,0-10.87,26.25,8,8,0,0,0,1.49,7.06L40,125.84Q40,128,40,130.16L25.11,148.8a8,8,0,0,0-1.48,7.06,107.21,107.21,0,0,0,10.88,26.25,8,8,0,0,0,6,3.93l23.72,2.64q1.49,1.56,3,3L70,215.46a8,8,0,0,0,3.94,6,107.71,107.71,0,0,0,26.25,10.87,8,8,0,0,0,7.06-1.49L125.84,216q2.16.06,4.32,0l18.64,14.92a8,8,0,0,0,7.06,1.48,107.21,107.21,0,0,0,26.25-10.88,8,8,0,0,0,3.93-6l2.64-23.72q1.56-1.48,3-3L215.46,186a8,8,0,0,0,6-3.94,107.71,107.71,0,0,0,10.87-26.25,8,8,0,0,0-1.49-7.06Zm-16.1-6.5a73.93,73.93,0,0,1,0,8.68,8,8,0,0,0,1.74,5.48l14.19,17.73a91.57,91.57,0,0,1-6.23,15L187,173.11a8,8,0,0,0-5.1,2.64,74.11,74.11,0,0,1-6.14,6.14,8,8,0,0,0-2.64,5.1l-2.51,22.58a91.32,91.32,0,0,1-15,6.23l-17.74-14.19a8,8,0,0,0-5-1.75h-.48a73.93,73.93,0,0,1-8.68,0,8,8,0,0,0-5.48,1.74L100.45,215.8a91.57,91.57,0,0,1-15-6.23L82.89,187a8,8,0,0,0-2.64-5.1,74.11,74.11,0,0,1-6.14-6.14,8,8,0,0,0-5.1-2.64L46.43,170.6a91.32,91.32,0,0,1-6.23-15l14.19-17.74a8,8,0,0,0,1.74-5.48,73.93,73.93,0,0,1,0-8.68,8,8,0,0,0-1.74-5.48L40.2,100.45a91.57,91.57,0,0,1,6.23-15L69,82.89a8,8,0,0,0,5.1-2.64,74.11,74.11,0,0,1,6.14-6.14A8,8,0,0,0,82.89,69L85.4,46.43a91.32,91.32,0,0,1,15-6.23l17.74,14.19a8,8,0,0,0,5.48,1.74,73.93,73.93,0,0,1,8.68,0,8,8,0,0,0,5.48-1.74L155.55,40.2a91.57,91.57,0,0,1,15,6.23L173.11,69a8,8,0,0,0,2.64,5.1,74.11,74.11,0,0,1,6.14,6.14,8,8,0,0,0,5.1,2.64l22.58,2.51a91.32,91.32,0,0,1,6.23,15l-14.19,17.74A8,8,0,0,0,199.87,123.66Z"></path></svg>
                    </div>
                    <p class="text-xs font-medium">Settings</p>
                </a>
            </div>
        </nav>
    </div>

    <script>
        document.addEventListener('DOMContentLoaded', () => {
            const params = new URLSearchParams(window.location.search);
            const propertyName = params.get('property');
            const pageTitle = document.getElementById('pageTitle');
            if (propertyName) {
                pageTitle.textContent = `Expenses for ${propertyName}`;
            }

            const expenseForm = document.getElementById('expenseForm');
            const expenseList = document.getElementById('expense-list');
            const expenseDateInput = document.getElementById('expenseDate');
            
            // Set default date to today
            expenseDateInput.valueAsDate = new Date();

            expenseForm.addEventListener('submit', (e) => {
                e.preventDefault();
                const type = expenseForm.expenseType.value;
                const amount = expenseForm.expenseAmount.value;
                const date = expenseForm.expenseDate.value;

                addExpenseToList(type, amount, date);
                expenseForm.reset();
                expenseDateInput.valueAsDate = new Date();
            });

            function addExpenseToList(type, amount, date) {
                const formattedAmount = new Intl.NumberFormat('en-IN').format(amount);
                const newItemHTML = `
                    <div class="bg-white dark:bg-slate-900 p-3 rounded-lg flex items-center gap-4 animate-fade-in">
                        <div class="flex-grow">
                            <p class="font-semibold text-slate-800 dark:text-slate-100">${type}</p>
                            <p class="text-sm text-slate-500 dark:text-slate-400">${date}</p>
                        </div>
                        <p class="font-bold text-lg text-red-500">- ₹${formattedAmount}</p>
                    </div>
                `;
                // Insert at the top of the list
                expenseList.insertAdjacentHTML('afterbegin', newItemHTML);
            }
        });

        // Dark mode logic
        const darkModeToggle = document.getElementById('darkModeToggle');
        const htmlEl = document.documentElement;
        const applyTheme = (theme) => {
            htmlEl.classList.toggle('dark', theme === 'dark');
        };
        const savedTheme = localStorage.getItem('theme') || (window.matchMedia('(prefers-color-scheme: dark)').matches ? 'dark' : 'light');
        applyTheme(savedTheme);
    </script>
</body>

</html>